(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8530],{39126:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/createCollection",function(){return n(19271)}])},19271:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var r=n(35944),l=n(67294),i=n(55162),o=n(82175),a=n(16310),s=n(83321),c=n(87357),u=n(15861),d=n(53156),h=n(85773),p=n(87109),m=n(50720),f=n(54813),y=n(26829),b=n(55678),v=n(69077),x=n(11163),Z=n.n(x),g=n(27484),w=n.n(g),C=n(94669),S=n(61230),B=n(59992),D=n(81292);function E(e){let{setImageUrl:t}=e,n=(0,l.useCallback)(async e=>{let n=await (0,S.Ix)(null==e?void 0:e[0]);t(n)},[]),{getRootProps:o,getInputProps:a,isDragActive:c}=(0,i.uI)({onDrop:n});return(0,r.BX)("div",{...o(),children:[(0,r.tZ)("input",{...a()}),(0,r.tZ)(s.Z,{variant:"contained",sx:{my:2},children:"UPLOAD BANNER"})]})}function N(e){let{setArtImageUrl:t}=e,n=(0,l.useCallback)(async e=>{let n=await (0,S.Ix)(null==e?void 0:e[0]);t(n)},[]),{getRootProps:o,getInputProps:a,isDragActive:s}=(0,i.uI)({onDrop:n});return(0,r.BX)("div",{...o(),children:[(0,r.tZ)("input",{...a()}),(0,r.tZ)(c.Z,{sx:{p:6,background:"#eee",cursor:"pointer"},children:(0,r.tZ)(u.Z,{sx:{textAlign:"center",color:" #1E32E5",textDecorationLine:"underline",fontSize:20},children:"Upload your artwork here"})})]})}function k(){let[e,t]=(0,l.useState)(""),[n,i]=(0,l.useState)(""),x=(0,v.mA)(),[g,S]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=localStorage.getItem("userInfo"),t=JSON.parse(e);(null==t?void 0:t.walletAddress)===(null==x?void 0:x.address)&&S(t)},[null==x?void 0:x.address]);let k=(0,o.TA)({initialValues:{symbol:"",description:"",collectionName:"",price:0,royalties:0,publicStartTime:Date.now(),publicEndTime:Date.now(),status:null===D.ni||void 0===D.ni?void 0:D.ni.Draft},validationSchema:a.Ry({symbol:a.Z_().max(255).required("Symbol is required"),price:a.Rx().required("Mint Price is required"),description:a.Z_().required("Description is required"),collectionName:a.Z_().max(255).required("Collection Name is required")}),onSubmit:async(t,r)=>{let{setErrors:l,setSubmitting:i}=r;if(!(null==x?void 0:x.address)){b.Am.error("Please connect your wallet");return}if(!e){b.Am.error("Please upload a banner");return}if(!n){b.Am.error("Please upload a artWork");return}console.log("formik?.values",null==k?void 0:k.values);let{symbol:o,description:a,collectionName:s,royalties:c,publicStartTime:u,publicEndTime:d,price:h,status:p}=(null==k?void 0:k.values)||{},m={symbol:o,description:a,collectionName:s,walletAddress:null==x?void 0:x.address,royalties:c/100,publicStartTime:u,publicEndTime:d,price:h,bannerUrl:e,imgUrl:n,userId:null==g?void 0:g.id,status:p};try{let e=await (0,B.BL)(m);"success"===e&&(b.Am.success("Create collection successfully"),Z().push("/myCollections"))}catch(e){i(!1)}}});return(0,r.BX)(d.Z,{maxWidth:"lg",sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[(0,r.BX)(c.Z,{sx:{width:640,display:"flex",flexDirection:"column",mt:14},children:[(0,r.BX)(c.Z,{children:[(0,r.BX)(c.Z,{sx:{position:"relative"},children:[(0,r.tZ)(c.Z,{sx:{width:"50%",height:"200px",background:"#fff",display:"flex",justifyContent:"center"},children:e?(0,r.tZ)(c.Z,{component:"img",src:e,alt:"test",sx:{width:"100%",objectFit:"cover",height:140}}):null}),(0,r.tZ)(u.Z,{sx:{position:"absolute",bottom:60,left:0,p:1,width:"50%",borderBottom:"1px solid #000",fontSize:24},children:"New Collection"}),(0,r.tZ)(u.Z,{sx:{position:"absolute",bottom:20,left:0,p:1,width:"50%",fontSize:16},children:"Status: Draft"})]}),(0,r.tZ)(E,{setImageUrl:t,imageUrl:e})]}),(0,r.BX)("form",{onSubmit:k.handleSubmit,children:[(0,r.tZ)(h.Z,{error:!!(k.touched.collectionName&&k.errors.collectionName),fullWidth:!0,helperText:k.touched.collectionName&&k.errors.collectionName,label:"Collection Name",placeholder:"E.g. Bored Ape Yacht Club",margin:"normal",name:"collectionName",onBlur:k.handleBlur,onChange:k.handleChange,type:"text",value:k.values.collectionName,variant:"outlined"}),(0,r.tZ)(h.Z,{error:!!(k.touched.symbol&&k.errors.symbol),fullWidth:!0,helperText:k.touched.symbol&&k.errors.symbol,label:"Symbol",placeholder:"E.g. BAYC",margin:"normal",name:"symbol",onBlur:k.handleBlur,onChange:k.handleChange,type:"text",value:k.values.symbol,variant:"outlined"}),(0,r.tZ)(h.Z,{error:!!(k.touched.description&&k.errors.description),fullWidth:!0,helperText:k.touched.description&&k.errors.description,label:"Description",margin:"normal",name:"description",onBlur:k.handleBlur,onChange:k.handleChange,type:"text",value:k.values.description,variant:"outlined",multiline:!0,rows:8}),n?(0,r.tZ)(c.Z,{sx:{width:"100%",maxHeight:"300px",background:"#fff",display:"flex",justifyContent:"center"},children:n?(0,r.tZ)(c.Z,{component:"img",src:n,alt:"test",sx:{width:"100%",objectFit:"contain"}}):null}):(0,r.tZ)(N,{setArtImageUrl:i}),(0,r.tZ)(c.Z,{sx:{my:2,display:"flex",justifyContent:"space-between"},children:(0,r.BX)(m._,{dateAdapter:y.y,children:[(0,r.tZ)(f.x,{sx:{width:"50%",mr:2},label:"Mint Start Date",value:w()(k.values.publicStartTime),onChange:e=>{k.setFieldValue("publicStartTime",Date.parse(e))}}),(0,r.tZ)(f.x,{sx:{width:"50%",ml:2},label:"Mint End Date",value:w()(k.values.publicEndTime),onChange:e=>{k.setFieldValue("publicEndTime",Date.parse(e))}})]})}),(0,r.BX)(c.Z,{sx:{display:"flex"},children:[(0,r.tZ)(h.Z,{error:!!(k.touched.price&&k.errors.price),fullWidth:!0,helperText:k.touched.price&&k.errors.price,label:"Mint Price",placeholder:"E.g. BAYC",margin:"normal",name:"price",value:k.values.price,onBlur:k.handleBlur,onChange:k.handleChange,type:"number",variant:"outlined",sx:{mr:2},InputProps:{endAdornment:(0,r.tZ)(p.Z,{position:"end",children:"ETH"})}}),(0,r.tZ)(h.Z,{error:!!(k.touched.royalties&&k.errors.royalties),fullWidth:!0,helperText:k.touched.royalties&&k.errors.royalties,label:"Royalties",margin:"normal",name:"royalties",onBlur:k.handleBlur,onChange:k.handleChange,type:"number",value:k.values.royalties,variant:"outlined",sx:{ml:2},InputProps:{endAdornment:(0,r.tZ)(p.Z,{position:"end",children:"%"})}})]}),(0,r.BX)(c.Z,{sx:{py:2},children:[(0,r.tZ)(s.Z,{color:"primary",disabled:k.isSubmitting,size:"large",variant:"contained",sx:{background:"#000",width:200,borderRadius:"50px",color:"#fff",mr:2,"&:hover":{background:"#000"}},onClick:()=>{k.setFieldValue("status",null===D.ni||void 0===D.ni?void 0:D.ni.Deployed),k.submitForm()},children:"Deploy"}),(0,r.tZ)(s.Z,{color:"primary",disabled:k.isSubmitting,size:"large",variant:"contained",sx:{background:"#fff",width:200,borderRadius:"50px",color:"#000","&:hover":{background:"#fff"}},onClick:()=>{k.setFieldValue("status",null===D.ni||void 0===D.ni?void 0:D.ni.Draft),k.submitForm()},children:"Save as Draft"})]})]})]}),(0,r.tZ)(s.Z,{startIcon:(0,r.tZ)(C.Z,{sx:{fontSize:20}}),sx:{position:"fixed",left:20,top:100,color:"#000",fontSize:20,fontFamily:"Georgia"},onClick:()=>{Z().back()},children:"back"})]})}},81292:function(e,t,n){"use strict";n.d(t,{Nb:function(){return r},ni:function(){return l}});let r={0:"Deleted",1:"Draft",2:"Deployed",3:"Minting",4:"Mint Ended"},l={Deleted:0,Draft:1,Deployed:2,Minting:3,MintEnded:4}},59992:function(e,t,n){"use strict";n.d(t,{BL:function(){return i},Ix:function(){return a},Rm:function(){return o},kj:function(){return l}});var r=n(11280);let l=async e=>{try{let t=await fetch("".concat(r._,"launchpad/queryList"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await t.json();if(null==n?void 0:n.success)return null==n?void 0:n.data;return""}catch(e){return console.error("Error:",e),""}},i=async e=>{try{let t=await fetch("".concat(r._,"launchpad/addLaunchpad"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await t.json();if(null==n?void 0:n.success)return"success";return""}catch(e){return console.error("Error:",e),""}},o=async e=>{try{let t=await fetch("".concat(r._,"launchpad/update"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await t.json();if(null==n?void 0:n.success)return"success";return""}catch(e){return console.error("Error:",e),""}},a=async e=>{let t=new FormData;t.append("file",e);try{let e=await fetch("".concat(r._,"launchpad/uploadImg"),{method:"POST",body:t}),n=await e.json();if(null==n?void 0:n.success)return null==n?void 0:n.msg;return""}catch(e){return console.error("Error:",e),""}}}},function(e){e.O(0,[2456,5760,6886,3187,4698,1975,5522,9774,2888,179],function(){return e(e.s=39126)}),_N_E=e.O()}]);