(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2390],{57954:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/editCollection",function(){return n(88736)}])},88736:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var l=n(35944),i=n(67294),r=n(82175),o=n(16310),a=n(53156),d=n(87357),s=n(15861),u=n(85773),c=n(87109),h=n(83321),p=n(50720),m=n(54813),f=n(26829),v=n(55678),y=n(69077),b=n(11163),x=n.n(b),Z=n(27484),g=n.n(Z),w=n(94669),C=n(59992),S=n(81292),B=n(55162),D=function(e){let{setImageUrl:t}=e,n=(0,i.useCallback)(async e=>{let n=await (0,C.Ix)(null==e?void 0:e[0]);t(n)},[]),{getRootProps:r,getInputProps:o,isDragActive:a}=(0,B.uI)({onDrop:n});return(0,l.BX)("div",{...r(),children:[(0,l.tZ)("input",{...o()}),(0,l.tZ)(h.Z,{variant:"contained",sx:{my:2},children:"UPLOAD BANNER"})]})},E=function(e){let{setArtImageUrl:t}=e,n=(0,i.useCallback)(async e=>{let n=await (0,C.Ix)(null==e?void 0:e[0]);t(n)},[]),{getRootProps:r,getInputProps:o,isDragActive:a}=(0,B.uI)({onDrop:n});return(0,l.BX)("div",{...r(),children:[(0,l.tZ)("input",{...o()}),(0,l.tZ)(d.Z,{sx:{p:6,background:"#eee",cursor:"pointer"},children:(0,l.tZ)(s.Z,{sx:{textAlign:"center",color:" #1E32E5",textDecorationLine:"underline",fontSize:20},children:"Upload your artwork here"})})]})};function N(){var e,t;let[n,Z]=(0,i.useState)(""),[B,N]=(0,i.useState)(""),k=(0,y.mA)(),[T,_]=(0,i.useState)(null),A=(0,b.useRouter)(),j=(0,r.TA)({initialValues:{id:-1,symbol:"",description:"",collectionName:"",price:1,royalties:0,publicStartTime:Date.now(),publicEndTime:Date.now(),status:null===S.ni||void 0===S.ni?void 0:S.ni.Draft},validationSchema:o.Ry({symbol:o.Z_().max(255).required("Symbol is required"),price:o.Rx().required("Mint Price is required"),description:o.Z_().required("Description is required"),collectionName:o.Z_().max(255).required("Collection Name is required")}),onSubmit:async(e,t)=>{let{setErrors:l,setSubmitting:i}=t;if(!(null==k?void 0:k.address)){v.Am.error("Please connect your wallet");return}if(!n){v.Am.error("Please upload a banner");return}if(!B){v.Am.error("Please upload a artWork");return}let{symbol:r,description:o,collectionName:a,royalties:d,id:s,publicStartTime:u,publicEndTime:c,price:h,status:p}=(null==j?void 0:j.values)||{},m={id:s,symbol:r,description:o,collectionName:a,walletAddress:null==k?void 0:k.address,royalties:d/100,publicStartTime:u,publicEndTime:c,price:h,bannerUrl:n,imgUrl:B,userId:null==T?void 0:T.id,status:p};try{let e=await (0,C.Rm)(m);"success"===e&&(v.Am.success("Update collection successfully"),x().push("/myCollections"))}catch(e){i(!1)}}});(0,i.useEffect)(()=>{let e=localStorage.getItem("userInfo"),t=JSON.parse(e);(null==t?void 0:t.walletAddress)===(null==k?void 0:k.address)&&_(t)},[null==k?void 0:k.address]);let I=e=>{var t,n,l;console.log(e),j.setValues({...null==e?void 0:e[0],royalties:100*((null==e?void 0:null===(t=e[0])||void 0===t?void 0:t.royalties)||0),price:1}),Z(null==e?void 0:null===(n=e[0])||void 0===n?void 0:n.bannerUrl),N(null==e?void 0:null===(l=e[0])||void 0===l?void 0:l.imgUrl)};return(0,i.useEffect)(()=>{let{cid:e}=A.query;if(e)(0,C.kj)({id:e}).then(e=>{I(e)});else{var t,n,l;(e=null===(t=null==window?void 0:null===(n=window.location)||void 0===n?void 0:null===(l=n.search)||void 0===l?void 0:l.split("?cid="))||void 0===t?void 0:t[1])&&(0,C.kj)({id:e}).then(e=>{I(e)})}},[]),(0,l.BX)(a.Z,{maxWidth:"lg",sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[(0,l.BX)(d.Z,{sx:{width:640,display:"flex",flexDirection:"column",mt:14},children:[(0,l.BX)(d.Z,{children:[(0,l.BX)(d.Z,{sx:{position:"relative"},children:[(0,l.tZ)(d.Z,{sx:{width:"50%",height:"200px",background:"#fff",display:"flex",justifyContent:"center"},children:n?(0,l.tZ)(d.Z,{component:"img",src:n,alt:"test",sx:{width:"100%",objectFit:"cover",height:140}}):null}),(0,l.tZ)(s.Z,{sx:{position:"absolute",bottom:60,left:0,p:1,width:"50%",borderBottom:"1px solid #000",fontSize:24},children:"New Collection"}),(0,l.BX)(s.Z,{sx:{position:"absolute",bottom:20,left:0,p:1,width:"50%",fontSize:16},children:["Status:"," ",S.Nb[(null==j?void 0:null===(e=j.values)||void 0===e?void 0:e.status)||1]]})]}),(0,l.tZ)(D,{setImageUrl:Z,imageUrl:n})]}),(0,l.BX)("form",{onSubmit:j.handleSubmit,children:[(0,l.tZ)(u.Z,{error:!!(j.touched.collectionName&&j.errors.collectionName),fullWidth:!0,helperText:j.touched.collectionName&&j.errors.collectionName,label:"Collection Name",placeholder:"E.g. Bored Ape Yacht Club",margin:"normal",name:"collectionName",onBlur:j.handleBlur,onChange:j.handleChange,type:"text",value:j.values.collectionName,variant:"outlined"}),(0,l.tZ)(u.Z,{error:!!(j.touched.symbol&&j.errors.symbol),fullWidth:!0,helperText:j.touched.symbol&&j.errors.symbol,label:"Symbol",placeholder:"E.g. BAYC",margin:"normal",name:"symbol",onBlur:j.handleBlur,onChange:j.handleChange,type:"text",value:j.values.symbol,variant:"outlined"}),(0,l.tZ)(u.Z,{error:!!(j.touched.description&&j.errors.description),fullWidth:!0,helperText:j.touched.description&&j.errors.description,label:"Description",margin:"normal",name:"description",onBlur:j.handleBlur,onChange:j.handleChange,type:"text",value:j.values.description,variant:"outlined",multiline:!0,rows:8}),B?(0,l.tZ)(d.Z,{sx:{width:"100%",maxHeight:"300px",background:"#fff",display:"flex",justifyContent:"center"},children:B?(0,l.tZ)(d.Z,{component:"img",src:B,alt:"test",sx:{width:"100%",objectFit:"contain"}}):null}):(0,l.tZ)(E,{setArtImageUrl:N}),(0,l.tZ)(d.Z,{sx:{my:2,display:"flex",justifyContent:"space-between"},children:(0,l.BX)(p._,{dateAdapter:f.y,children:[(0,l.tZ)(m.x,{sx:{width:"50%",mr:2},label:"Mint Start Date",value:g()(j.values.publicStartTime),onChange:e=>{j.setFieldValue("publicStartTime",Date.parse(e))}}),(0,l.tZ)(m.x,{sx:{width:"50%",ml:2},label:"Mint End Date",value:g()(j.values.publicEndTime),onChange:e=>{j.setFieldValue("publicEndTime",Date.parse(e))}})]})}),(0,l.BX)(d.Z,{sx:{display:"flex"},children:[(0,l.tZ)(u.Z,{error:!!(j.touched.price&&j.errors.price),fullWidth:!0,helperText:j.touched.price&&j.errors.price,label:"Mint Price",placeholder:"E.g. BAYC",margin:"normal",name:"price",value:j.values.price,onBlur:j.handleBlur,onChange:j.handleChange,type:"number",variant:"outlined",sx:{mr:2},InputProps:{endAdornment:(0,l.tZ)(c.Z,{position:"end",children:"ETH"})}}),(0,l.tZ)(u.Z,{error:!!(j.touched.royalties&&j.errors.royalties),fullWidth:!0,helperText:j.touched.royalties&&j.errors.royalties,label:"Royalties",margin:"normal",name:"royalties",onBlur:j.handleBlur,onChange:j.handleChange,type:"number",value:j.values.royalties,variant:"outlined",sx:{ml:2},InputProps:{endAdornment:(0,l.tZ)(c.Z,{position:"end",children:"%"})}})]}),(0,l.BX)(d.Z,{sx:{py:2},children:[(0,l.tZ)(h.Z,{color:"primary",disabled:j.isSubmitting,size:"large",variant:"contained",sx:{background:"#000",width:200,borderRadius:"50px",color:"#fff",mr:2,"&:hover":{background:"#000"}},onClick:()=>{j.setFieldValue("status",null===S.ni||void 0===S.ni?void 0:S.ni.Deployed),j.submitForm()},children:"Deploy"}),(null==j?void 0:null===(t=j.values)||void 0===t?void 0:t.status)===1?(0,l.tZ)(h.Z,{color:"primary",disabled:j.isSubmitting,size:"large",variant:"contained",sx:{background:"#fff",width:200,borderRadius:"50px",color:"#000","&:hover":{background:"#fff"}},onClick:()=>{j.setFieldValue("status",null===S.ni||void 0===S.ni?void 0:S.ni.Draft),j.submitForm()},children:"Save as Draft"}):null]})]})]}),(0,l.tZ)(h.Z,{startIcon:(0,l.tZ)(w.Z,{sx:{fontSize:20}}),sx:{position:"fixed",left:20,top:100,color:"#000",fontSize:20,fontFamily:"Georgia"},onClick:()=>{x().back()},children:"back"})]})}},81292:function(e,t,n){"use strict";n.d(t,{Nb:function(){return l},ni:function(){return i}});let l={0:"Deleted",1:"Draft",2:"Deployed",3:"Minting",4:"Mint Ended"},i={Deleted:0,Draft:1,Deployed:2,Minting:3,MintEnded:4}},59992:function(e,t,n){"use strict";n.d(t,{BL:function(){return r},Ix:function(){return a},Rm:function(){return o},kj:function(){return i}});var l=n(11280);let i=async e=>{try{let t=await fetch("".concat(l._,"launchpad/queryList"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await t.json();if(null==n?void 0:n.success)return null==n?void 0:n.data;return""}catch(e){return console.error("Error:",e),""}},r=async e=>{try{let t=await fetch("".concat(l._,"launchpad/addLaunchpad"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await t.json();if(null==n?void 0:n.success)return"success";return""}catch(e){return console.error("Error:",e),""}},o=async e=>{try{let t=await fetch("".concat(l._,"launchpad/update"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await t.json();if(null==n?void 0:n.success)return"success";return""}catch(e){return console.error("Error:",e),""}},a=async e=>{let t=new FormData;t.append("file",e);try{let e=await fetch("".concat(l._,"launchpad/uploadImg"),{method:"POST",body:t}),n=await e.json();if(null==n?void 0:n.success)return null==n?void 0:n.msg;return""}catch(e){return console.error("Error:",e),""}}}},function(e){e.O(0,[2456,5760,6886,3187,4698,1975,5522,9774,2888,179],function(){return e(e.s=57954)}),_N_E=e.O()}]);